!function(t,a,e,o){function n(a,e){this.element=a,this.options=t.extend({},s,e),this._defaults=s,this._name=i,this.init()}var i="autosave",s={url:"",method:"POST",event:"change",data:{},type:"html",debug:!1,before:function(){},done:function(){},fail:function(){},always:function(){}};n.prototype.init=function(){function a(a){var e=/^data\-(\w+)$/,o={};return a.is(":checkbox")?o.value=a.prop("checked"):o.value=a.val()||"",o.name=a.attr("name")||"",t(a[0].attributes).each(function(){e.test(this.name)&&(attribute_name=e.exec(this.name)[1],o[attribute_name]=this.value)}),o}var e=t(this.element),o=a(e),n=this.options,o=a(e);n.event=o.event||n.event,e.on(n.event,function(o){n.before&&n.before.call(e);var i=a(e);options=t.extend({},n,i);var s=t.extend({},options.data,i);"false"==options.debug&&(options.debug=!1),delete s.url,delete s.method,delete s.type,delete s.debug,s.event=options.event,options.debug?console.log(s):t.ajax({url:options.url,type:options.method,cache:!1,data:s,dataType:options.type}).done(function(t,a,o){e.data("autosave-data",t),e.data("autosave-textStatus",a),e.data("autosave-jqXHR",o),e.trigger("autosave-done")}).fail(function(t,a,o){e.data("autosave-jqXHR",t),e.data("autosave-textStatus",a),e.data("autosave-errorThrown",o),e.trigger("autosave-fail")}).always(function(){e.trigger("autosave-always")})}),n.done&&e.on("autosave-done",function(){var t=e.data("autosave-data"),a=e.data("autosave-textStatus"),o=e.data("autosave-jqXHR");options.done.call(e,t,a,o)}),n.fail&&e.on("autosave-fail",function(){var t=e.data("autosave-jqXHR"),a=e.data("autosave-textStatus"),o=e.data("autosave-errorThrown");options.fail.call(e,t,a,o)}),n.always&&e.on("autosave-always",function(){options.always.call(e)})},t.fn.autosave=function(t){return this.each(function(){new n(this,t)})}}(jQuery,window,document);